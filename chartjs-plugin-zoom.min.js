/*!
 * chartjs-plugin-zoom
 * http://chartjs.org/
 * Version: 0.5.0
 *
 * Copyright 2016 Evert Timberg
 * Released under the MIT license
 * https://github.com/chartjs/chartjs-plugin-zoom/blob/master/LICENSE.md
 */
!function e(o,t,n){function a(r,l){if(!t[r]){if(!o[r]){var m="function"==typeof require&&require;if(!l&&m)return m(r,!0);if(i)return i(r,!0);var s=new Error("Cannot find module '"+r+"'");throw s.code="MODULE_NOT_FOUND",s}var u=t[r]={exports:{}};o[r][0].call(u.exports,function(e){var t=o[r][1][e];return a(t?t:e)},u,u.exports,e,o,t,n)}return t[r].exports}for(var i="function"==typeof require&&require,r=0;r<n.length;r++)a(n[r]);return a}({1:[function(e,o,t){},{}],2:[function(e,o,t){function n(e,o){return void 0===e||"string"==typeof e&&e.indexOf(o)!==-1}function a(e,o){if(e.scaleAxes&&e.rangeMax&&null!=e.rangeMax[e.scaleAxes]){var t=e.rangeMax[e.scaleAxes];o>t&&(o=t)}return o}function i(e,o){if(e.scaleAxes&&e.rangeMin&&null!=e.rangeMin[e.scaleAxes]){var t=e.rangeMin[e.scaleAxes];o<t&&(o=t)}return o}function r(e,o,t,n){var r=e.chart.data.labels,l=e.minIndex,m=r.length-1,s=e.maxIndex,u=n.sensitivity,c=e.isHorizontal()?e.left+e.width/2:e.top+e.height/2,d=e.isHorizontal()?t.x:t.y;_.zoomCumulativeDelta=o>1?_.zoomCumulativeDelta+1:_.zoomCumulativeDelta-1,Math.abs(_.zoomCumulativeDelta)>u&&(_.zoomCumulativeDelta<0?(d<=c?l<=0?s=Math.min(m,s+1):l=Math.max(0,l-1):d>c&&(s>=m?l=Math.max(0,l-1):s=Math.min(m,s+1)),_.zoomCumulativeDelta=0):_.zoomCumulativeDelta>0&&(d<=c?l=l<s?l=Math.min(s,l+1):l:d>c&&(s=s>l?s=Math.max(l,s-1):s),_.zoomCumulativeDelta=0),e.options.ticks.min=i(n,r[l]),e.options.ticks.max=a(n,r[s]))}function l(e,o,t,n){var r,l,m=e.options;e.isHorizontal()?(r=e.right-e.left,l=(t.x-e.left)/r):(r=e.bottom-e.top,l=(t.y-e.top)/r);var s=1-l,u=r*(o-1),c=u*l,d=u*s;m.time.min=i(n,e.getValueForPixel(e.getPixelForValue(e.firstTick)+c)),m.time.max=a(n,e.getValueForPixel(e.getPixelForValue(e.lastTick)-d))}function m(e,o,t,n){var r=e.max-e.min,l=r*(o-1),m=e.isHorizontal()?t.x:t.y,s=(e.getValueForPixel(m)-e.min)/r,u=1-s,c=l*s,d=l*u;e.options.ticks.min=i(n,e.min+c),e.options.ticks.max=a(n,e.max-d)}function s(e,o,t,n){var a=y[e.options.type];a&&a(e,o,t,n)}function u(e,o,t){var a=e.chartArea;t||(t={x:(a.left+a.right)/2,y:(a.top+a.bottom)/2});var i=e.options.zoom;if(i&&D.getValueOrDefault(i.enabled,M.zoom.enabled)){var r=D.getValueOrDefault(e.options.zoom.mode,M.zoom.mode);i.sensitivity=D.getValueOrDefault(e.options.zoom.sensitivity,M.zoom.sensitivity),D.each(e.scales,function(e,a){e.isHorizontal()&&n(r,"x")?(i.scaleAxes="x",s(e,o,t,i)):!e.isHorizontal()&&n(r,"y")&&(i.scaleAxes="y",s(e,o,t,i))}),e.update(0)}}function c(e,o,t){var n,r=e.chart.data.labels,l=r.length-1,m=Math.max(e.ticks.length-(e.options.gridLines.offsetGridLines?0:1),1),s=t.speed,u=e.minIndex,c=Math.round(e.width/(m*s));_.panCumulativeDelta+=o,u=_.panCumulativeDelta>c?Math.max(0,u-1):_.panCumulativeDelta<-c?Math.min(l-m+1,u+1):u,_.panCumulativeDelta=u!==e.minIndex?0:_.panCumulativeDelta,n=Math.min(l,u+m-1),e.options.ticks.min=i(t,r[u]),e.options.ticks.max=a(t,r[n])}function d(e,o,t){var n=e.options;n.time.min=i(t,e.getValueForPixel(e.getPixelForValue(e.firstTick)-o)),n.time.max=a(t,e.getValueForPixel(e.getPixelForValue(e.lastTick)-o))}function p(e,o,t){var n=e.options.ticks,r=e.start,l=e.end;n.reverse?(n.max=e.getValueForPixel(e.getPixelForValue(r)-o),n.min=e.getValueForPixel(e.getPixelForValue(l)-o)):(n.min=e.getValueForPixel(e.getPixelForValue(r)-o),n.max=e.getValueForPixel(e.getPixelForValue(l)-o)),n.min=i(t,n.min),n.max=a(t,n.max)}function v(e,o,t){var n=F[e.options.type];n&&n(e,o,t)}function f(e,o,t){var a=e.options.pan;if(a&&D.getValueOrDefault(a.enabled,M.pan.enabled)){var i=D.getValueOrDefault(e.options.pan.mode,M.pan.mode);a.speed=D.getValueOrDefault(e.options.pan.speed,M.pan.speed),D.each(e.scales,function(e,r){e.isHorizontal()&&n(i,"x")&&0!==o?(a.scaleAxes="x",v(e,o,a)):!e.isHorizontal()&&n(i,"y")&&0!==t&&(a.scaleAxes="y",v(e,t,a))}),e.update(0)}}function x(e,o){var t=e.scales;if(void 0!==o)return t[o];for(var n in t){var a=t[n];if(a.isHorizontal())return a}}function g(e,o){var t=e.scales;if(void 0!==o)return t[o];for(var n in t){var a=t[n];if(!a.isHorizontal())return a}}var h=e("hammerjs");h="function"==typeof h?h:window.Hammer;var z=e("chart.js");z="function"==typeof z?z:window.Chart;var D=z.helpers,_=z.Zoom=z.Zoom||{},y=_.zoomFunctions=_.zoomFunctions||{},F=_.panFunctions=_.panFunctions||{},M=_.defaults={pan:{enabled:!0,mode:"xy",speed:20,threshold:10},zoom:{enabled:!0,mode:"xy",sensitivity:3}};_.zoomFunctions.category=r,_.zoomFunctions.time=l,_.zoomFunctions.linear=m,_.zoomFunctions.logarithmic=m,_.panFunctions.category=c,_.panFunctions.time=d,_.panFunctions.linear=p,_.panFunctions.logarithmic=p,_.panCumulativeDelta=0,_.zoomCumulativeDelta=0;var H={afterInit:function(e){D.each(e.scales,function(e){e.originalOptions=JSON.parse(JSON.stringify(e.options))}),e.resetZoom=function(){D.each(e.scales,function(e,o){var t=e.options.time,n=e.options.ticks,a=e.originalOptions;t&&(t.min=a.time.min,t.max=a.time.max),n&&(n.min=a.ticks.min,n.max=a.ticks.max),e.options=D.configMerge(e.options,e.originalOptions)}),D.each(e.data.datasets,function(e,o){e._meta=null}),e.update()},e.zoomToLimits=function(o){var t,n,r,l=e.options.zoom,m=o.x,s=o.y;void 0!==m&&(t=x(e,m.axis_id),n=void 0===m.min?t.min:m.min,r=void 0===m.max?t.max:m.max,t.options.ticks.min=i(l,n),t.options.ticks.max=a(l,r)),void 0!==s&&(t=g(e,s.axis_id),n=void 0===s.min?t.min:s.min,r=void 0===s.max?t.max:s.max,t.options.ticks.min=i(l,n),t.options.ticks.max=a(l,r)),e.update(0)}},beforeInit:function(e){e.zoom={};var o=e.zoom.node=e.chart.ctx.canvas,t=e.options,n=D.getValueOrDefault(t.pan?t.pan.threshold:void 0,_.defaults.pan.threshold);if(t.zoom&&t.zoom.drag?(t.zoom.mode="x",e.zoom._mouseDownHandler=function(o){e.zoom._dragZoomStart=o},o.addEventListener("mousedown",e.zoom._mouseDownHandler),e.zoom._mouseMoveHandler=function(o){e.zoom._dragZoomStart&&(e.zoom._dragZoomEnd=o,e.update(0)),e.update(0)},o.addEventListener("mousemove",e.zoom._mouseMoveHandler),e.zoom._mouseUpHandler=function(o){if(e.zoom._dragZoomStart){var t=e.chartArea,n=g(e),a=e.zoom._dragZoomStart,i=a.target.getBoundingClientRect().left,r=Math.min(a.clientX,o.clientX)-i,l=Math.max(a.clientX,o.clientX)-i,m=l-r,s=t.right-t.left,c=1+(s-m)/s;m>0&&u(e,c,{x:m/2+r,y:(n.bottom-n.top)/2}),e.zoom._dragZoomStart=null,e.zoom._dragZoomEnd=null}},o.addEventListener("mouseup",e.zoom._mouseUpHandler)):(e.zoom._wheelHandler=function(o){var t=o.target.getBoundingClientRect(),n=o.clientX-t.left,a=o.clientY-t.top,i={x:n,y:a};o.deltaY<0?u(e,1.1,i):u(e,.909,i),o.preventDefault()},o.addEventListener("wheel",e.zoom._wheelHandler)),h){var a=new h.Manager(o);a.add(new h.Pinch),a.add(new h.Pan({threshold:n}));var i,r=function(o){var t=1/i*o.scale;u(e,t,o.center),i=o.scale};a.on("pinchstart",function(e){i=1}),a.on("pinch",r),a.on("pinchend",function(e){r(e),i=null,_.zoomCumulativeDelta=0});var l=null,m=null,s=!1,c=function(o){if(null!==l&&null!==m){s=!0;var t=o.deltaX-l,n=o.deltaY-m;l=o.deltaX,m=o.deltaY,f(e,t,n)}};a.on("panstart",function(e){l=0,m=0,c(e)}),a.on("panmove",c),a.on("panend",function(e){l=null,m=null,_.panCumulativeDelta=0,setTimeout(function(){s=!1},500)}),e.zoom._ghostClickHandler=function(e){s&&(e.stopImmediatePropagation(),e.preventDefault())},o.addEventListener("click",e.zoom._ghostClickHandler),e._mc=a}},beforeDatasetsDraw:function(e){var o=e.chart.ctx,t=e.chartArea;if(o.save(),o.beginPath(),e.zoom._dragZoomEnd){var n=g(e),a=e.zoom._dragZoomStart,i=e.zoom._dragZoomEnd,r=a.target.getBoundingClientRect().left,l=Math.min(a.clientX,i.clientX)-r,m=Math.max(a.clientX,i.clientX)-r,s=m-l;o.fillStyle="rgba(225,225,225,0.3)",o.lineWidth=5,o.fillRect(l,n.top,s,n.bottom-n.top)}o.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),o.clip()},afterDatasetsDraw:function(e){e.chart.ctx.restore()},destroy:function(e){if(e.zoom){var o=e.options,t=e.zoom.node;o.zoom&&o.zoom.drag?(t.removeEventListener("mousedown",e.zoom._mouseDownHandler),t.removeEventListener("mousemove",e.zoom._mouseMoveHandler),t.removeEventListener("mouseup",e.zoom._mouseUpHandler)):t.removeEventListener("wheel",e.zoom._wheelHandler),h&&t.removeEventListener("click",e.zoom._ghostClickHandler),delete e.zoom;var n=e._mc;n&&(n.remove("pinchstart"),n.remove("pinch"),n.remove("pinchend"),n.remove("panstart"),n.remove("pan"),n.remove("panend"))}}};o.exports=H,z.pluginService.register(H)},{"chart.js":1,hammerjs:1}]},{},[2]);